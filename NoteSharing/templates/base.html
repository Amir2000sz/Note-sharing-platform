<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}My Notes{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen flex flex-col bg-[#f4e1b8] text-[#3b2f2f] font-sans">

<!-- Header -->
<header class="flex justify-between items-center px-20 py-5 bg-[#f4e1b8]/85 transition-all duration-500 shadow-sm origin-top hover:scale-y-105 hover:bg-[#f4e1b8]/95">
    <!-- Left: site title -->
    <a href="{% url 'Home' %}">
        <h1 class="text-3xl font-semibold tracking-wide transition duration-300 hover:text-[#6d4c41]">
            MyNotes
        </h1>
    </a>

    <!-- Right: login/logout button -->
    {% if user.is_authenticated %}
        {% with profile=user.profile %}
    <!-- Profile Dropdown (Pure CSS with peer) -->
        <div class="relative ml-6">
            <!-- Hidden checkbox for toggle -->
            <input type="checkbox" id="profile-toggle" class="peer hidden" />

            <!-- Avatar button -->
            <label for="profile-toggle"
                class="flex items-center justify-center w-10 h-10 rounded-full overflow-hidden border border-[#d2a679]/60 shadow-sm bg-white cursor-pointer">
                {% if profile and profile.ProfileImage %}
                    <img src="{{ profile.ProfileImage.url }}"
                        alt="{{ user.username }} profile picture"
                        class="w-full h-full object-cover">
                {% else %}
                    <span class="flex items-center justify-center w-full h-full text-sm font-semibold text-[#3b2f2f] bg-[#d2a679]/40">
                        {{ user.username|slice:":1"|default:"?"|upper }}
                    </span>
                {% endif %}
            </label>

        <!-- Dropdown -->
            <div class="absolute right-0 mt-2 w-44 bg-white border border-gray-200 rounded-lg shadow-lg z-50 overflow-hidden 
                        opacity-0 scale-95 pointer-events-none transition-all duration-200
                        peer-checked:opacity-100 peer-checked:scale-100 peer-checked:pointer-events-auto">
            <div class="px-4 py-3 text-sm text-gray-700 border-b border-gray-100">
                    <p class="font-medium">{{ user.username }}</p>
                    <p class="text-xs text-gray-500">{{ user.email }}</p>
                </div>
                <a href="/"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile</a>
                <a href="/settings"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
                <a href="{% url 'logout' %}"
                class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Logout</a>
            </div>
        </div>

        {% endwith %}
    {% else %}
        <!-- Not logged in: GitHub style -->
    <div class="flex items-center gap-3">
        <a href="{% url 'login' %}"
           class="px-4 py-1.5 text-sm font-medium text-[#3b2f2f] bg-white/80 hover:bg-white hover:text-[#6d4c41] rounded-full transition shadow-sm">
            Sign in
        </a>
        <a href="{%url 'signup'%}"
           class="px-4 py-1.5 text-sm font-medium text-white bg-[#3b2f2f] hover:bg-[#6d4c41] rounded-full transition shadow-sm">
            Sign up
        </a>
    </div>
    {% endif %}
</header>



    <!-- Main content -->
    <main class="flex-1 flex flex-col">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer class="text-center text-sm text-gray-700 py-4 border-t border-gray-300/30">
        © 2025 MyNotes — All rights reserved.
    </footer>

</body>
</html>
